# 03. 사용자 및 권한

사용자 및 권한

MySQL에서 사용자 계정을 생성하는 방법이나, 각 계정의 권한을 설정하는 방법은 다른 DBMS와는 차이가 있다.

대표적으로, MySQL의 사용자 계정은 단순히 사용자의 아이디뿐 아니라 해당 사용자가 어느 IP에서 접속하고 있는지도 확인한다.

또한 MySQL 8.0 버전부터는 권한을 묶어서 관리하는 역할의 개념이 도입되어, 각 사용자의 권한으로 미리 준비된 권한 세트를 부여하는 것도 가능하다.

#### 3.1 사용자 식별

MySQL의 사용자는 다른 DBMS와는 조금 다르게, 사용자의 계정뿐 아니라, 사용자의 접속 지점도 계정의 일부가 된다.

따라서, MySQL에서 계정을 언급할 때는 항상 아이디와 호스트를 함께 명시해야 한다.

```
'svc_id'@'127.0.0.1`  # 로컬호스트에서 svc_id라는 아이디로 접속할 때만 사용할 수 있는 계정
```

만약, 모든 외부 컴퓨터에서 접속이 가능한 사용자 계정을 생성하고 싶다면 사용자 계정의 호스트 부분을 '%' 문자로 대체하면 된다.

> '%' 문자는 모든 IP 혹은 모든 호스트명을 의미한다.

```
'svc_id'@'%'
```

2개의 사용자 계정이 있는 MySQL 서버가 있다면, 권한이나 계정 정보에 대해 MySQL은 범위가 작은 것을 먼저 선택한다.

```
'svc_id'@'192.168.0.10' # 선택
'svc_id'@'%'
```

#### 3.2 사용자 계정 관리

**3.2.1 시스템 계정과 일반 계정**

MysSQL 8.0부터 계정은 `SYSTEM_USER` 권한을 가지고 있느냐에 따라 시스템 계정(System Account)와 일반 계정(Regular Account)으로 구분된다.

> 시스템 계정: 데이터베이스 서버 관리자를 위한 계정
>
> * 계정 관리 (계정 생성 및 삭제, 그리고 계정의 권한 부여 및 제거)
> * 다른 세션(Connection) 또는 그 세션에서 실행 중인 쿼리를 강제 종료
> * 스토어드 프로그램 생성시 DEFINER를 타 사용자로 설정
>
> 일반 계정: 응용 프로그램이나 개발자를 위한 계정

시스템 계정은 시스템 계정과 일반 계정을 관리할 수 있지만, 일반 계정은 시스템 계정을 관리할 수 없으며 데이터베이스 서버 관리와 관련된 중요 작업은 시스템 계정으로만 수행할 수 있다.

MySQL 서버에는 내장된 계정들이 있는데, 'root'@'localhost'를 제외한 3개의 계정은 내부적으로 각기 다른 목적으로 사용되므로 삭제되지 않도록 해야한다.

* `'mysql.sys'@'localhost'`
  * MySQL 8.0부터 기본으로 내장된 sys 스키마의 객체들의 DEFINER로 사용되는 계정
  * sys 스키마의 객체로는 뷰, 함수, 프로시저 등이 있다.
* `'mysql.session'@'locahost'`
  * MySQL 플러그인이 서버로 접근할 때 사용되는 계정
* `` `'mysql.infoschema'@'localhost' ``
  * information\_schema에 정의된 뷰의 DEFINER로 사용되는 계정

> 이 3가지 계정은 처음부터 잠겨(account\_locked=Y) 있는 상태이므로 의도적으로 잠긴 계정을 풀지 않는 한 악의적인 용도로 사용할 수 없다.

<figure><img src="../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

ggg\
